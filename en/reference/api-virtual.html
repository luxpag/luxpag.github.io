<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>API Virtual account | Developers</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Luxpag Docs for Developers">
    
    <link rel="preload" href="/assets/css/0.styles.cf43c265.css" as="style"><link rel="preload" href="/assets/js/app.eb187e61.js" as="script"><link rel="preload" href="/assets/js/2.9c343760.js" as="script"><link rel="preload" href="/assets/js/40.c2be1cb1.js" as="script"><link rel="prefetch" href="/assets/js/10.1ee561aa.js"><link rel="prefetch" href="/assets/js/11.fc81966b.js"><link rel="prefetch" href="/assets/js/12.a475d720.js"><link rel="prefetch" href="/assets/js/13.c68c532c.js"><link rel="prefetch" href="/assets/js/14.a21ac2f1.js"><link rel="prefetch" href="/assets/js/15.439b83ac.js"><link rel="prefetch" href="/assets/js/16.135f056d.js"><link rel="prefetch" href="/assets/js/17.61c324e5.js"><link rel="prefetch" href="/assets/js/18.8a56261e.js"><link rel="prefetch" href="/assets/js/19.f86e81cb.js"><link rel="prefetch" href="/assets/js/20.6318e26e.js"><link rel="prefetch" href="/assets/js/21.5bb6ab78.js"><link rel="prefetch" href="/assets/js/22.2eda916a.js"><link rel="prefetch" href="/assets/js/23.cfe89afa.js"><link rel="prefetch" href="/assets/js/24.a14cabd0.js"><link rel="prefetch" href="/assets/js/25.5dcbe8ad.js"><link rel="prefetch" href="/assets/js/26.bd91ccea.js"><link rel="prefetch" href="/assets/js/27.52aa3302.js"><link rel="prefetch" href="/assets/js/28.aed0dab0.js"><link rel="prefetch" href="/assets/js/29.f381530b.js"><link rel="prefetch" href="/assets/js/3.094a2331.js"><link rel="prefetch" href="/assets/js/30.98fc8289.js"><link rel="prefetch" href="/assets/js/31.b51d49de.js"><link rel="prefetch" href="/assets/js/32.3a5d593d.js"><link rel="prefetch" href="/assets/js/33.2e07e950.js"><link rel="prefetch" href="/assets/js/34.0339b9e0.js"><link rel="prefetch" href="/assets/js/35.72f969ab.js"><link rel="prefetch" href="/assets/js/36.d5258303.js"><link rel="prefetch" href="/assets/js/37.9235f069.js"><link rel="prefetch" href="/assets/js/38.bfeb674b.js"><link rel="prefetch" href="/assets/js/39.5c7b12d6.js"><link rel="prefetch" href="/assets/js/4.49c9baba.js"><link rel="prefetch" href="/assets/js/41.500b9272.js"><link rel="prefetch" href="/assets/js/42.895b9d70.js"><link rel="prefetch" href="/assets/js/43.066b868e.js"><link rel="prefetch" href="/assets/js/44.e08dc64e.js"><link rel="prefetch" href="/assets/js/45.cb80773e.js"><link rel="prefetch" href="/assets/js/46.dcbc9c6f.js"><link rel="prefetch" href="/assets/js/47.4a40cf7b.js"><link rel="prefetch" href="/assets/js/48.7c7ad891.js"><link rel="prefetch" href="/assets/js/49.f3dda7d5.js"><link rel="prefetch" href="/assets/js/5.87db3a88.js"><link rel="prefetch" href="/assets/js/50.5279e7af.js"><link rel="prefetch" href="/assets/js/51.ad4e2b1a.js"><link rel="prefetch" href="/assets/js/52.957a3423.js"><link rel="prefetch" href="/assets/js/53.8b7b6a63.js"><link rel="prefetch" href="/assets/js/6.18b4183d.js"><link rel="prefetch" href="/assets/js/7.d8a9c17b.js"><link rel="prefetch" href="/assets/js/8.d8def89a.js"><link rel="prefetch" href="/assets/js/9.46c1f282.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cf43c265.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/en/" class="home-link router-link-active"><img src="/luxpag-logo-long.png" alt="Developers" class="logo"> <span class="site-name can-hide">Developers</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/en/reference/" class="nav-link router-link-active">
  API Reference
</a></div><div class="nav-item"><a href="/en/faq.html" class="nav-link">
  FAQ
</a></div><div class="nav-item"><a href="/en/changelog.html" class="nav-link">
  Changelog
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  Home
</a></li><li class="dropdown-item"><!----> <a href="/en/reference/api-virtual.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/cn/reference/api-virtual.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/en/reference/" class="nav-link router-link-active">
  API Reference
</a></div><div class="nav-item"><a href="/en/faq.html" class="nav-link">
  FAQ
</a></div><div class="nav-item"><a href="/en/changelog.html" class="nav-link">
  Changelog
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">
  Home
</a></li><li class="dropdown-item"><!----> <a href="/en/reference/api-virtual.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/cn/reference/api-virtual.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span></span> <!----></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Payments</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en/reference/checkout-redirect.html" class="sidebar-link">Checkout Redirect Payment</a></li><li><a href="/en/reference/token.html" class="sidebar-link">Get credit card token</a></li><li><a href="/en/reference/api-direct.html" class="sidebar-link">API Direct Payment</a></li><li><a href="/en/reference/success-direct.html" class="sidebar-link">API Direct Payment Access</a></li><li><a href="/en/reference/api-installments.html" class="sidebar-link">Direct credit card installment query</a></li><li><a href="/en/reference/api-virtual.html" aria-current="page" class="active sidebar-link">API Virtual account</a></li><li><a href="/en/reference/bank-query.html" class="sidebar-link">Bank Query</a></li><li><a href="/en/reference/trade-query.html" class="sidebar-link">Trade Query</a></li><li><a href="/en/reference/refund.html" class="sidebar-link">Refund</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Notifications</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Data</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="api-virtual-account"><a href="#api-virtual-account" class="header-anchor">#</a> API Virtual account</h1> <h3 id="support-method"><a href="#support-method" class="header-anchor">#</a> Support Method</h3> <table><thead><tr><th style="text-align:left;">Method</th> <th style="text-align:left;">Require User Info</th></tr></thead> <tbody><tr><td style="text-align:left;">SPEI</td> <td style="text-align:left;">Required</td></tr></tbody></table> <p>Luxpag provide virtual SPEI account:
Merchants can apply for virtual SPEI account from Luxpag.
Luxpag response with information of a virtual SPEI acount.
Merchants forward this virtual SPEI account to one user.
The user pay to this virtual account.
The channel received the fund and callback to Luxpag.
Luxpag generate an order and <a href="#ipn-notifications">callback</a> to the merchant to inform the SUCCESS payment.</p> <h3 id="request-base-url"><a href="#request-base-url" class="header-anchor">#</a> Request Base URL</h3> <div class="language- extra-class"><pre class="language-text"><code>  Test Environment : https://dev-gateway.luxpag.com
  Prod Environment : https://gateway.luxpag.com
</code></pre></div><h3 id="endpoints"><a href="#endpoints" class="header-anchor">#</a> EndPoints</h3> <div class="language- extra-class"><pre class="language-text"><code>  Create virtual account: /virtual-account/spei/create
  Cancel virtual account: /virtual-account/spei/cancel
  Query virtual account: /virtual-account/spei/query
  Number of available accounts: /virtual-account/spei/quantity
</code></pre></div><h3 id="request-header"><a href="#request-header" class="header-anchor">#</a> Request Header</h3> <table><thead><tr><th style="text-align:left;">Parameter</th> <th style="text-align:center;">Required</th> <th>Description</th></tr></thead> <tbody><tr><td style="text-align:left;">Content-Type</td> <td style="text-align:center;">recommend</td> <td>application/json</td></tr> <tr><td style="text-align:left;">Authorization</td> <td style="text-align:center;">yes</td> <td><a href="../faq">Basic Base64(app_id:secret_key)</a></td></tr></tbody></table> <h3 id="request-body-json-format"><a href="#request-body-json-format" class="header-anchor">#</a> Request Body (JSON format)</h3> <h4 id="create-virtual-account"><a href="#create-virtual-account" class="header-anchor">#</a> Create virtual account</h4> <table><thead><tr><th style="text-align:left;">Parameter</th> <th style="text-align:center;">Type</th> <th style="text-align:center;">Required</th> <th style="text-align:center;">Max Length(or Default Value)</th> <th>Description</th></tr></thead> <tbody><tr><td style="text-align:left;">app_id</td> <td style="text-align:center;">string</td> <td style="text-align:center;">yes</td> <td style="text-align:center;">32</td> <td>created app's id at dashboard</td></tr> <tr><td style="text-align:left;">timestamp</td> <td style="text-align:center;">string</td> <td style="text-align:center;">yes</td> <td style="text-align:center;">19</td> <td>yyyy-MM-dd HH:mm:ss</td></tr> <tr><td style="text-align:left;">notify_url</td> <td style="text-align:center;">string</td> <td style="text-align:center;">yes</td> <td style="text-align:center;"></td> <td><a href="#ipn-notifications">IPN URL to merchant</a></td></tr> <tr><td style="text-align:left;">customer.buyer_id</td> <td style="text-align:center;">string</td> <td style="text-align:center;">yes</td> <td style="text-align:center;"></td> <td>merchant user's id</td></tr> <tr><td style="text-align:left;">customer.email</td> <td style="text-align:center;">string</td> <td style="text-align:center;">yes</td> <td style="text-align:center;"></td> <td>user's email('+' is not supported)</td></tr> <tr><td style="text-align:left;">customer.name</td> <td style="text-align:center;">string</td> <td style="text-align:center;">no</td> <td style="text-align:center;"></td> <td>user's name</td></tr> <tr><td style="text-align:left;">customer.phone</td> <td style="text-align:center;">string</td> <td style="text-align:center;">no</td> <td style="text-align:center;"></td> <td>user's mobile phone number</td></tr> <tr><td style="text-align:left;">customer.identify.number</td> <td style="text-align:center;">string</td> <td style="text-align:center;">yes</td> <td style="text-align:center;"></td> <td>user's ID number</td></tr> <tr><td style="text-align:left;">customer.identify.type</td> <td style="text-align:center;">string</td> <td style="text-align:center;">yes</td> <td style="text-align:center;"></td> <td>user's ID type</td></tr></tbody></table> <h4 id="query-virtual-account"><a href="#query-virtual-account" class="header-anchor">#</a> Query virtual account</h4> <table><thead><tr><th style="text-align:left;">Parameter</th> <th style="text-align:center;">Type</th> <th style="text-align:center;">Required</th> <th style="text-align:center;">Max Length(or Default Value)</th> <th>Description</th></tr></thead> <tbody><tr><td style="text-align:left;">app_id</td> <td style="text-align:center;">string</td> <td style="text-align:center;">yes</td> <td style="text-align:center;">32</td> <td>created app's id at dashboard</td></tr> <tr><td style="text-align:left;">timestamp</td> <td style="text-align:center;">string</td> <td style="text-align:center;">yes</td> <td style="text-align:center;">19</td> <td>yyyy-MM-dd HH:mm:ss</td></tr> <tr><td style="text-align:left;">account_id</td> <td style="text-align:center;">string</td> <td style="text-align:center;">yes</td> <td style="text-align:center;"></td> <td>Virtual Account ID</td></tr></tbody></table> <h4 id="cancel-virtual-account"><a href="#cancel-virtual-account" class="header-anchor">#</a> Cancel virtual account</h4> <table><thead><tr><th style="text-align:left;">Parameter</th> <th style="text-align:center;">Type</th> <th style="text-align:center;">Required</th> <th style="text-align:center;">Max Length(or Default Value)</th> <th>Description</th></tr></thead> <tbody><tr><td style="text-align:left;">app_id</td> <td style="text-align:center;">string</td> <td style="text-align:center;">yes</td> <td style="text-align:center;">32</td> <td>created app's id at dashboard</td></tr> <tr><td style="text-align:left;">timestamp</td> <td style="text-align:center;">string</td> <td style="text-align:center;">yes</td> <td style="text-align:center;">19</td> <td>yyyy-MM-dd HH:mm:ss</td></tr> <tr><td style="text-align:left;">account_id</td> <td style="text-align:center;">string</td> <td style="text-align:center;">yes</td> <td style="text-align:center;"></td> <td>Virtual Account ID</td></tr></tbody></table> <h4 id="number-of-available-accounts"><a href="#number-of-available-accounts" class="header-anchor">#</a> Number of available accounts</h4> <table><thead><tr><th style="text-align:left;">Parameter</th> <th style="text-align:center;">Type</th> <th style="text-align:center;">Required</th> <th style="text-align:center;">Max Length(or Default Value)</th> <th>Description</th></tr></thead> <tbody><tr><td style="text-align:left;">app_id</td> <td style="text-align:center;">string</td> <td style="text-align:center;">yes</td> <td style="text-align:center;">32</td> <td>created app's id at dashboard</td></tr> <tr><td style="text-align:left;">timestamp</td> <td style="text-align:center;">string</td> <td style="text-align:center;">yes</td> <td style="text-align:center;">19</td> <td>yyyy-MM-dd HH:mm:ss</td></tr></tbody></table> <h3 id="request-sample"><a href="#request-sample" class="header-anchor">#</a> Request Sample</h3> <div class="language- extra-class"><pre class="language-text"><code>curl --location --request POST 'https://gateway.luxpag.com/virtual-account/spei/create' \
--header 'Authorization: Basic Base64(appid:secret_key)' \
--header 'Content-Type: application/json' \
--data-raw '{
    &quot;app_id&quot;: &quot;app_id&quot;,
    &quot;notify_url&quot;: &quot;notify_url&quot;,
    &quot;timestamp&quot;: &quot;{{datetime}}&quot;,
    &quot;customer&quot;: {
      &quot;email&quot;: &quot;email&quot;,
      &quot;buyer_id&quot;: &quot;buyer_id&quot;
    }
}'
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>curl --location --request POST 'https://gateway.luxpag.com/virtual-account/spei/query' \
--header 'Authorization: Basic Base64(appid:secret_key)' \
--header 'Content-Type: application/json' \
--data-raw '{
    &quot;app_id&quot;: &quot;app_id&quot;,
    &quot;account_id&quot;: &quot;account_id&quot;,
    &quot;timestamp&quot;: &quot;{{datetime}}&quot;
}'
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>curl --location --request POST 'https://gateway.luxpag.com/virtual-account/spei/cancel' \
--header 'Authorization: Basic Base64(appid:secret_key)' \
--header 'Content-Type: application/json' \
--data-raw '{
    &quot;app_id&quot;: &quot;app_id&quot;,
    &quot;account_id&quot;: &quot;account_id&quot;,
    &quot;timestamp&quot;: &quot;{{datetime}}&quot;
}'
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>curl --location --request POST 'https://gateway.luxpag.com/virtual-account/spei/quantity' \
--header 'Authorization: Basic Base64(appid:secret_key)' \
--header 'Content-Type: application/json' \
--data-raw '{
    &quot;app_id&quot;: &quot;app_id&quot;,
    &quot;timestamp&quot;: &quot;{{datetime}}&quot;
}'
</code></pre></div><h3 id="http-response-json-format"><a href="#http-response-json-format" class="header-anchor">#</a> Http Response (JSON format)</h3> <table><thead><tr><th style="text-align:left;">Parameter</th> <th style="text-align:center;">Type</th> <th>Description</th></tr></thead> <tbody><tr><td style="text-align:left;">code</td> <td style="text-align:center;">string</td> <td>return code</td></tr> <tr><td style="text-align:left;">msg</td> <td style="text-align:center;">string</td> <td>return msg</td></tr> <tr><td style="text-align:left;">sub_code</td> <td style="text-align:center;">string</td> <td>return sub code(only error)</td></tr> <tr><td style="text-align:left;">sub_msg</td> <td style="text-align:center;">string</td> <td>return sub msg(only error)</td></tr> <tr><td style="text-align:left;">account_id</td> <td style="text-align:center;">string</td> <td>Virtual Account ID</td></tr> <tr><td style="text-align:left;">account_number</td> <td style="text-align:center;">string</td> <td>Virtual Account(SPEI Clabe)</td></tr> <tr><td style="text-align:left;">provider</td> <td style="text-align:center;">string</td> <td>provider</td></tr> <tr><td style="text-align:left;">status</td> <td style="text-align:center;">string</td> <td>status；ACTIVE、CANCELED</td></tr> <tr><td style="text-align:left;">notify_url</td> <td style="text-align:center;">string</td> <td><a href="#ipn-notifications">IPN URL to merchant</a></td></tr> <tr><td style="text-align:left;">beneficiary_name</td> <td style="text-align:center;">string</td> <td>Service provider</td></tr> <tr><td style="text-align:left;">available_quantity</td> <td style="text-align:center;">Integer</td> <td>Number of available accounts</td></tr></tbody></table> <h3 id="return-code-succes"><a href="#return-code-succes" class="header-anchor">#</a> Return Code (Succes)</h3> <div class="language- extra-class"><pre class="language-text"><code>{
    &quot;code&quot;: &quot;10000&quot;,
    &quot;msg&quot;: &quot;Success&quot;,
    &quot;account_id&quot;: &quot;{account_id}&quot;,
    &quot;account_number&quot;: &quot;{account_number}&quot;,
    &quot;provider&quot;: &quot;{provider}&quot;,
    &quot;status&quot;: &quot;{status}&quot;,
    &quot;notify_url&quot;: &quot;{notify_url}&quot;,
}
</code></pre></div><h3 id="return-code-fail"><a href="#return-code-fail" class="header-anchor">#</a> Return Code (Fail)</h3> <div class="language- extra-class"><pre class="language-text"><code>{
    &quot;code&quot;: &quot;40002&quot;,
    &quot;msg&quot;: &quot;Business Failed&quot;,
    &quot;sub_code&quot;: &quot;invalid-signature&quot;,
    &quot;sub_msg&quot;: &quot;invalid signature&quot;
}
</code></pre></div><h1 id="ipn-notifications"><a href="#ipn-notifications" class="header-anchor">#</a> IPN Notifications</h1> <p>IPN (Instant Payment Notification) is a notification sent from one server to another through an HTTP POST request informing your transactions.</p> <p>In order to receive notifications about the events in your platform, you have to previously configure the notification when you do the POST of the payment, indicating the URL in the field notify_url.</p> <h3 id="events"><a href="#events" class="header-anchor">#</a> Events</h3> <p>Whenever an event occurs, we will send you a notification in json format using HTTP POST to the URL that you specified.</p> <p>We will notify the following events:</p> <table><thead><tr><th style="text-align:left;">Action</th> <th>Description</th></tr></thead> <tbody><tr><td style="text-align:left;">SUCCESS</td> <td>trade succeeded</td></tr></tbody></table> <p>Luxpag will send notifications with the following schedule of retries and confirmation awaiting times. You must return an HTTP STATUS 200 (OK) with reponse data &quot;success&quot; or &quot;{&quot;result&quot;:&quot;success&quot;}&quot; before the corresponding time expires. If not, it will be assumed that you did not receive it correctly and you will be notified again.</p> <table><thead><tr><th style="text-align:left;">Event</th> <th>Time after the first dispatch</th></tr></thead> <tbody><tr><td style="text-align:left;">Dispatch</td> <td>-</td></tr> <tr><td style="text-align:left;">1st retry</td> <td>10 minutes</td></tr> <tr><td style="text-align:left;">2nd retry</td> <td>30 minutes</td></tr> <tr><td style="text-align:left;">3rd retry</td> <td>60 minutes</td></tr> <tr><td style="text-align:left;">4th retry</td> <td>120 minutes</td></tr> <tr><td style="text-align:left;">5th retry</td> <td>360 minutes</td></tr> <tr><td style="text-align:left;">6th retry</td> <td>840 minutes</td></tr></tbody></table> <h3 id="notification-body-json-format"><a href="#notification-body-json-format" class="header-anchor">#</a> Notification Body (JSON format)</h3> <table><thead><tr><th style="text-align:left;">Parameter</th> <th style="text-align:center;">Type</th> <th style="text-align:center;">Required</th> <th style="text-align:center;">Max Length(or Default Value)</th> <th>Description</th></tr></thead> <tbody><tr><td style="text-align:left;">app_id</td> <td style="text-align:center;">string</td> <td style="text-align:center;">yes</td> <td style="text-align:center;">32</td> <td>created app's id at dashboard</td></tr> <tr><td style="text-align:left;">out_trade_no</td> <td style="text-align:center;">string</td> <td style="text-align:center;">yes</td> <td style="text-align:center;">64</td> <td>ID given by the merchant in their system</td></tr> <tr><td style="text-align:left;">out_request_no</td> <td style="text-align:center;">string</td> <td style="text-align:center;">no</td> <td style="text-align:center;">64</td> <td>refund number</td></tr> <tr><td style="text-align:left;">method</td> <td style="text-align:center;">string</td> <td style="text-align:center;">yes</td> <td style="text-align:center;">32</td> <td><a href="method-list">Payment methods</a></td></tr> <tr><td style="text-align:left;">currency</td> <td style="text-align:center;">string</td> <td style="text-align:center;">yes</td> <td style="text-align:center;">3</td> <td><a href="method-list">MXN for mexico</a></td></tr> <tr><td style="text-align:left;">amount</td> <td style="text-align:center;">string</td> <td style="text-align:center;">yes</td> <td style="text-align:center;"></td> <td>request payment amount</td></tr> <tr><td style="text-align:left;">user.name</td> <td style="text-align:center;">string</td> <td style="text-align:center;">no</td> <td style="text-align:center;"></td> <td>user's name</td></tr> <tr><td style="text-align:left;">user.email</td> <td style="text-align:center;">string</td> <td style="text-align:center;">no</td> <td style="text-align:center;"></td> <td>user's email</td></tr> <tr><td style="text-align:left;">user.phone</td> <td style="text-align:center;">string</td> <td style="text-align:center;">no</td> <td style="text-align:center;"></td> <td>user's mobile phone number</td></tr> <tr><td style="text-align:left;">user.identify.number</td> <td style="text-align:center;">string</td> <td style="text-align:center;">no</td> <td style="text-align:center;"></td> <td>user's ID number</td></tr> <tr><td style="text-align:left;">user.identify.type</td> <td style="text-align:center;">string</td> <td style="text-align:center;">no</td> <td style="text-align:center;"></td> <td>user's ID type</td></tr> <tr><td style="text-align:left;">card.card_no</td> <td style="text-align:center;">string</td> <td style="text-align:center;">no</td> <td style="text-align:center;"></td> <td>card number</td></tr> <tr><td style="text-align:left;">transfer_account.account_id</td> <td style="text-align:center;">string</td> <td style="text-align:center;">yes</td> <td style="text-align:center;"></td> <td>virtual account's ID</td></tr> <tr><td style="text-align:left;">transfer_account.account_number</td> <td style="text-align:center;">string</td> <td style="text-align:center;">yes</td> <td style="text-align:center;"></td> <td>virtual account(SPEI Clabe)</td></tr> <tr><td style="text-align:left;">transfer_account.provider</td> <td style="text-align:center;">string</td> <td style="text-align:center;">yes</td> <td style="text-align:center;"></td> <td>virtual account's provider</td></tr> <tr><td style="text-align:left;">transfer_account.buyer_id</td> <td style="text-align:center;">string</td> <td style="text-align:center;">yes</td> <td style="text-align:center;"></td> <td>virtual account's merchant user's id</td></tr> <tr><td style="text-align:left;">transfer_account.transfer_timestamp</td> <td style="text-align:center;">string</td> <td style="text-align:center;">yes</td> <td style="text-align:center;"></td> <td>virtual account's timestamp</td></tr> <tr><td style="text-align:left;">transfer_account.beneficiary_name</td> <td style="text-align:center;">string</td> <td style="text-align:center;">yes</td> <td style="text-align:center;"></td> <td>virtual account's Service provider</td></tr></tbody></table> <p>The notification sent has the following format:</p> <div class="language- extra-class"><pre class="language-text"><code>
Method: POST
Header:Content-Type: application/json
Header:Luxpag-Signature: hmacSHA256(payload, secret_key)
Body:
  {
  	&quot;amount&quot;:&quot;&quot;,
  	&quot;out_trade_no&quot;:&quot;&quot;,
  	&quot;method&quot;:&quot;&quot;,
  	&quot;trade_status&quot;:&quot;&quot;,
  	&quot;trade_no&quot;:&quot;&quot;,
  	&quot;currency&quot;:&quot;&quot;,
  	&quot;out_request_no&quot;:&quot;&quot;,
  	&quot;app_id&quot;:&quot;&quot;,
    &quot;user&quot;:{
      &quot;identify&quot;:{
        &quot;number&quot;:&quot;&quot;,
        &quot;type&quot;:&quot;&quot;
      },
      &quot;phone&quot;:&quot;&quot;,
      &quot;email&quot;:&quot;&quot;
    },
    &quot;card&quot;:{
      &quot;card_no&quot;:&quot;F6L4&quot;
    },
    &quot;transfer_account&quot;:{
        &quot;account_id&quot;:&quot;&quot;,
        &quot;account_number&quot;:&quot;&quot;,
        &quot;beneficiary_name&quot;:&quot;&quot;,
        &quot;buyer_id&quot;:&quot;&quot;,
        &quot;provider&quot;:&quot;&quot;,
        &quot;transfer_timestamp&quot;:1669192513
    }
  }
</code></pre></div><p>payload:The data sent to the merchant by post, and the payload is JSON string.</p> <h3 id="what-should-i-do-when-i-receive-a-notification"><a href="#what-should-i-do-when-i-receive-a-notification" class="header-anchor">#</a> What should I do when I receive a notification?</h3> <p>When you receive a notification on your platform, Luxpag waits for a response to validate that you received it correctly. For this, you must return an HTTP STATUS 200 (OK) with reponse data &quot;success&quot; or &quot;{&quot;result&quot;:&quot;success&quot;}&quot;.</p> <p>It is recommended that you respond to the notification before executing business logic or prior to accessing external resources so as not to exceed the estimated response times.</p> <p>This communication is exclusively between the servers of Luxpag and your server, so there will not be a physical user seeing any type of result.</p> <h3 id="check-signature-optional"><a href="#check-signature-optional" class="header-anchor">#</a> Check Signature(Optional)</h3> <p>Luxpag includes a signature in the Luxpag-Signature header of each event. You can verify the signature to enhance security.</p> <p>We will use the merchant's private key to encrypt the callback payload with hmacSHA256.</p> <div class="language- extra-class"><pre class="language-text"><code>  hmacSHA256(payload, secret_key);
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/en/reference/api-installments.html" class="prev">
        Direct credit card installment query
      </a></span> <span class="next"><a href="/en/reference/bank-query.html">
        Bank Query
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.eb187e61.js" defer></script><script src="/assets/js/2.9c343760.js" defer></script><script src="/assets/js/40.c2be1cb1.js" defer></script>
  </body>
</html>
