(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{244:function(t,e,a){"use strict";a.r(e);var i=a(0),n=Object(i.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"ipn-notifications"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ipn-notifications"}},[t._v("#")]),t._v(" IPN Notifications")]),t._v(" "),a("p",[t._v("IPN (Instant Payment Notification) is a notification sent from one server to another through an HTTP POST request informing your transactions.")]),t._v(" "),a("p",[t._v("In order to receive notifications about the events in your platform, you have to previously configure the notification when you do the POST of the payment, indicating the URL in the field notify_url("),a("a",{attrs:{href:"checkout-redirect"}},[t._v("Checkout Redirect Payment")]),t._v(" or "),a("a",{attrs:{href:"api-direct"}},[t._v("API Direct Payment")]),t._v(").")]),t._v(" "),a("h3",{attrs:{id:"events"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#events"}},[t._v("#")]),t._v(" Events")]),t._v(" "),a("p",[t._v("Whenever an event occurs, we will send you a notification in json format using HTTP POST to the URL that you specified.")]),t._v(" "),a("p",[t._v("We will notify the following events:")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("Action")]),t._v(" "),a("th",[t._v("Description")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("PROCESSING")]),t._v(" "),a("td",[t._v("trade processing(payment information submitted by the user)")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("SUCCESS")]),t._v(" "),a("td",[t._v("trade succeeded")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("EXPIRED")]),t._v(" "),a("td",[t._v("trade expired（Initial）")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("CANCEL")]),t._v(" "),a("td",[t._v("trade cancelled")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("RISK_CONTROLLING")]),t._v(" "),a("td",[t._v("trade in risk control")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("DISPUTE")]),t._v(" "),a("td",[t._v("dispute processing")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("REFUSED")]),t._v(" "),a("td",[t._v("trade refused")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("REFUNDED")]),t._v(" "),a("td",[t._v("refund occurred")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("CHARGEBACK")]),t._v(" "),a("td",[t._v("chargeback occurred")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("REFUND_REVOKE")]),t._v(" "),a("td",[t._v("Refund Rollback")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("REFUND_REFUSED")]),t._v(" "),a("td",[t._v("Refund rejected")])])])]),t._v(" "),a("img",{attrs:{src:t.$withBase("/Status.png"),alt:"Status"}}),t._v(" "),a("p",[t._v('Luxpag will send notifications with the following schedule of retries and confirmation awaiting times. You must return an HTTP STATUS 200 (OK) with reponse data "success" or "{"result":"success"}" before the corresponding time expires. If not, it will be assumed that you did not receive it correctly and you will be notified again.')]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("Event")]),t._v(" "),a("th",[t._v("Time after the first dispatch")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("Dispatch")]),t._v(" "),a("td",[t._v("-")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("1st retry")]),t._v(" "),a("td",[t._v("10 minutes")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("2nd retry")]),t._v(" "),a("td",[t._v("30 minutes")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("3rd retry")]),t._v(" "),a("td",[t._v("60 minutes")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("4th retry")]),t._v(" "),a("td",[t._v("120 minutes")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("5th retry")]),t._v(" "),a("td",[t._v("360 minutes")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("6th retry")]),t._v(" "),a("td",[t._v("840 minutes")])])])]),t._v(" "),a("h3",{attrs:{id:"notification-body-json-format"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#notification-body-json-format"}},[t._v("#")]),t._v(" Notification Body (JSON format)")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("Parameter")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Type")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Required")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Max Length(or Default Value)")]),t._v(" "),a("th",[t._v("Description")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("app_id")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("32")]),t._v(" "),a("td",[t._v("created app's id at dashboard")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("trade_no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("64")]),t._v(" "),a("td",[t._v("Luxpag trade NO.")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("out_trade_no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("64")]),t._v(" "),a("td",[t._v("ID given by the merchant in their system")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("out_request_no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("64")]),t._v(" "),a("td",[t._v("refund number")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("method")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("32")]),t._v(" "),a("td",[a("a",{attrs:{href:"method-list"}},[t._v("Payment methods")])])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("trade_status")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("16")]),t._v(" "),a("td",[t._v("trade's status")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("currency")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("3")]),t._v(" "),a("td",[a("a",{attrs:{href:"method-list"}},[t._v("BRL for brazil")])])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("amount")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",[t._v("request payment amount")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("user.name")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",[t._v("user's name")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("user.email")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",[t._v("user's email")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("user.phone")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",[t._v("user's mobile phone number")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("user.identify.number")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",[t._v("user's ID number")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("user.identify.type")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",[t._v("user's ID type")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("card.card_no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",[t._v("card number")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("channel")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",[t._v("Wallet channel")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("region")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",[a("a",{attrs:{href:"region-list"}},[t._v("region code")])])])])]),t._v(" "),a("p",[t._v("The notification sent has the following format:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('\nMethod: POST\nHeader:Content-Type: application/json\nHeader:Luxpag-Signature: hmacSHA256(payload, secret_key)\nBody:\n  {\n  \t"amount":"",\n  \t"out_trade_no":"",\n  \t"method":"",\n  \t"trade_status":"",\n  \t"trade_no":"",\n  \t"currency":"",\n  \t"out_request_no":"",\n  \t"app_id":"",\n    "user":{\n      "identify":{\n        "number":"",\n        "type":""\n      },\n      "phone":"",\n      "email":""\n    },\n    "card":{\n      "card_no":"F6L4"\n    }\n  }\n')])])]),a("p",[t._v("payload:The data sent to the merchant by post, and the payload is JSON string.")]),t._v(" "),a("h3",{attrs:{id:"what-should-i-do-when-i-receive-a-notification"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#what-should-i-do-when-i-receive-a-notification"}},[t._v("#")]),t._v(" What should I do when I receive a notification?")]),t._v(" "),a("p",[t._v('When you receive a notification on your platform, Luxpag waits for a response to validate that you received it correctly. For this, you must return an HTTP STATUS 200 (OK) with reponse data "success" or "{"result":"success"}".')]),t._v(" "),a("p",[t._v("It is recommended that you respond to the notification before executing business logic or prior to accessing external resources so as not to exceed the estimated response times.")]),t._v(" "),a("p",[t._v("This communication is exclusively between the servers of Luxpag and your server, so there will not be a physical user seeing any type of result.")]),t._v(" "),a("h3",{attrs:{id:"check-signature-optional"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#check-signature-optional"}},[t._v("#")]),t._v(" Check Signature(Optional)")]),t._v(" "),a("p",[t._v("Luxpag includes a signature in the Luxpag-Signature header of each event. You can verify the signature to enhance security.")]),t._v(" "),a("p",[t._v("We will use the merchant's private key to encrypt the callback payload with hmacSHA256.")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("  hmacSHA256(payload, secret_key);\n")])])]),a("h3",{attrs:{id:"security-policy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#security-policy"}},[t._v("#")]),t._v(" Security Policy")]),t._v(" "),a("p",[t._v("Suggestion: Perform whitelist verification on the Luxpag callback service IP;")]),t._v(" "),a("p",[t._v("Suggestion: After receiving the successful IPN notification of the order, "),a("a",{attrs:{href:"trade-query"}},[t._v("check back on Luxpag")]),t._v(", especially for virtual account orders.")])])}),[],!1,null,null,null);e.default=n.exports}}]);