(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{244:function(t,e,a){"use strict";a.r(e);var n=a(0),r=Object(n.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"get-credit-card-token"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#get-credit-card-token"}},[t._v("#")]),t._v(" Get credit card token")]),t._v(" "),a("h3",{attrs:{id:"using-luxpag-javascript-integration-library"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-luxpag-javascript-integration-library"}},[t._v("#")]),t._v(" Using luxpag JavaScript integration Library")]),t._v(" "),a("p",[t._v("For "),a("a",{attrs:{href:"api-direct"}},[t._v("API Direct Payment")]),t._v(" - Credit Card, you need to use "),a("a",{attrs:{target:"_blank",href:"https://res.luxpag.com/lib/js/luxpag.min.js"}},[t._v("luxpag.min.js")]),t._v(" to obtain then token and fingerprint.")]),t._v(" "),a("h3",{attrs:{id:"integration-steps"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#integration-steps"}},[t._v("#")]),t._v(" Integration steps")]),t._v(" "),a("h4",{attrs:{id:"_1-add-luxpag-min-js-reference-to-your-payment-page"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-add-luxpag-min-js-reference-to-your-payment-page"}},[t._v("#")]),t._v(" 1. Add luxpag.min.js reference to your payment page")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("It is not recommended to store luxpag.min.js in local cache")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('<script src="https://res.luxpag.com/lib/js/luxpag.min.js"><\/script>\n')])])]),a("h4",{attrs:{id:"_2-get-app-id-and-public-key"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-get-app-id-and-public-key"}},[t._v("#")]),t._v(" 2. Get APP ID and Public Key")]),t._v(" "),a("p",[t._v('Find the app on the "App Management" page of luxpag merchant backoffice, click "App Name" to view the details, find the app ID and public key, and give it to Luxpag.Setpublishablekey assignment.\nProd: production environment, Sandbox: Test Environment')]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("<script>\n  Luxpag.setPublishableKey('${app_id}','${public_key}','sandbox | prod')\n<\/script>\n")])])]),a("h4",{attrs:{id:"_3-create-luxpag-form-components"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-create-luxpag-form-components"}},[t._v("#")]),t._v(" 3. Create luxpag form components")]),t._v(" "),a("p",[t._v("Ensure the existing form include following fields, and add the data-checkout attribute according to the format.")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("Parameter")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Required")]),t._v(" "),a("th",[t._v("Description")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("luxpagCardNumber")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),a("td",[t._v("card number")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("luxpagSecurityCode")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),a("td",[t._v("security code CVV")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("luxpagCardExpirationYear")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),a("td",[t._v("expiration year (4 digits)")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("luxpagCardExpirationMonth")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),a("td",[t._v("expiration month (2 digits)")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("luxpagCardholderName")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),a("td",[t._v("holder name")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("luxpagDocType")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",[t._v("holder id type")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("luxpagDocNumber")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",[t._v("holder id number")])])])]),t._v(" "),a("p",[t._v("for example：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('<form method="post" id="pay">\n    <ul>\n        <li>\n            <label for="cardNumber">Credit card number:</label>\n            <input type="text" data-checkout="luxpagCardNumber" maxlength="16" />\n        </li>\n        <li>\n            <label for="securityCode">Security code(cvv):</label>\n            <input type="text" data-checkout="luxpagSecurityCode" maxlength="4" />\n        </li>\n        <li>\n            <label for="cardExpirationYear">Expiration year:</label>\n            <input type="text" data-checkout="luxpagCardExpirationYear" placeholder="2021" />\n        </li>\n        <li>\n            <label for="cardExpirationMonth">Expiration month:</label>\n            <input type="text" data-checkout="luxpagCardExpirationMonth" maxlength="2" />\n        </li>\n        <li>\n            <label for="cardholderName">Card holder name:</label>\n            <input type="text" data-checkout="luxpagCardholderName"  />\n        </li>\n        <li>\n            <label for="docType">Document type:</label>\n            <select data-checkout="luxpagDocType">\n\t            <option value="CPF">CPF</option>\n            </select>\n        </li>\n        <li>\n            <label for="docNumber">Document number:</label>\n            <input type="text" data-checkout="luxpagDocNumber" placeholder="12345678" />\n        </li>\n    </ul>\n    \x3c!-- 存放token值的隐藏域 --\x3e\n    <input name="token" id="luxpagToken" type="hidden">\n    \x3c!-- 存放fingerprint值的隐藏域 --\x3e\n    <input name="fingerprint" id="luxpagFingerprint" type="hidden">\n    <input type="submit" value="Pay!" />\n</form>\n')])])]),a("p",[t._v("Two of these hidden fields")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('\x3c!-- token --\x3e\n<input name="token" id="luxpagToken" type="hidden">\n\x3c!-- fingerprint --\x3e\n<input name="fingerprint" id="luxpagFingerprint" type="hidden">\n')])])]),a("h4",{attrs:{id:"_4-submit-form-for-eventlistener"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-submit-form-for-eventlistener"}},[t._v("#")]),t._v(" 4.Submit form for EventListener")]),t._v(" "),a("p",[t._v("The original submission; Luxpag.createToken becomes the form that will update both (of the above) hidden fields.")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("var $form = document.querySelector('#pay')\nLuxpag.createToken($form, responseHandler)\n")])])]),a("p",[t._v("for example：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('document.querySelector("#pay").addEventListener("submit",function(e){\n        e.preventDefault() \n        var $form = document.querySelector(\'#pay\')\n        Luxpag.createToken($form, responseHandler)\n    })\n\n    function responseHandler(res){\n        if(res.status != 200){\n            // create token fail\n            alert(res.message)\n        }else{\n            // create token success\n            alert(res.message+" token="+document.querySelector("#luxpagToken").value\n            +"; fingerprint="+document.querySelector("#luxpagFingerprint").value)\n        }\n    }\n')])])])])}),[],!1,null,null,null);e.default=r.exports}}]);